<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1251">
   <TITLE>Опции транслятора TASM и редактора  связей TLINK</TITLE>
<!версия HTML-стандарта>
<!начало html-документа>
<!заголовок html-документа>
<!заголовок страницы>
</HEAD>
<BODY BGCOLOR="#CFFFFF">
<!базовый размер символов (для всего документа><!тело html-документа>
<HR SIZE=5 WIDTH=60%>
<H2>
<FONT SIZE=+0>Директивы управления листингом</FONT></H2>
<FONT SIZE=+0>Директивы управления листингом делятся на следующие группы:</FONT>
<UL>
<LI>
<FONT SIZE=+0><I><A HREF="#ОбщиеДирективы">общие директивы управления листингом</A></I></FONT></LI>

<LI>
<I><FONT SIZE=+0><A HREF="#ДирективыВыводаВключаемыхФайлов">директивы вывода
в листинг включаемых файлов</A></FONT></I></LI>

<LI>
<I><FONT SIZE=+0><A HREF="#ДирективыВыводаУсловногоАссемблирования">директивы
вывода блоков условного ассемблирования</A></FONT></I></LI>

<LI>
<I><FONT SIZE=+0><A HREF="#ДирективыВыводаМакрокоманд">директивы вывода
в листинг макрокоманд</A></FONT></I></LI>

<LI>
<I><FONT SIZE=+0><A HREF="#ДирективыВыводаИнформацииОПерекрестныхСсылках">директивы
вывода в листинг информации о перекрестных ссылках</A></FONT></I></LI>

<LI>
<FONT SIZE=+0><I><A HREF="#ДирективыИзмененияФорматаЛистинга">директивы
изменения формата листинга</A></I></FONT></LI>
</UL>
<FONT SIZE=+0>При рассмотрении директив обращайте внимание на то, что их
формат отличается для режимов работы транслятора MASM и IDEAL:</FONT>
<UL>
<LI>
<FONT SIZE=+0>директивам режима MASM предшествует точка;</FONT></LI>

<LI>
<FONT SIZE=+0>директивам режима IDEAL предшествует знак “%”.</FONT></LI>
</UL>
<FONT SIZE=+0>В остальном синтаксис директив простой. Большинство директив
не имеет операндов. Директивы, как и команды, задаются в отдельной строке
в том месте программы, с которого должно начаться их действие.&nbsp;</FONT><A NAME="ОбщиеДирективы"></A>
<H3>
<FONT SIZE=+0>Общие директивы управления листингом</FONT></H3>
<FONT SIZE=+0>Директивы этой группы предназначены для управления видом
файла листинга. Все директивы являются парными </FONT>—<FONT SIZE=+0> это
означает, что если одна директива что-то разрешает, то другая, наоборот,
запрещает. Рассмотрим назначение этих пар директив.</FONT>

<P><FONT SIZE=+0><B>%LIST и %NOLIST (.LIST и .XLIST)</B></FONT>
<BR><FONT SIZE=+0>Директивы <B>.LIST</B> или <B>%LIST</B> определяют необходимость
вывода в файл листинга всех строк исходного кода. Эти директивы подразумеваются
<I>по умолчанию</I>.</FONT>
<BR><FONT SIZE=+0>Для запрета вывода в файл листинга всех строк исходного
кода необходимо использовать директивы <B>.XLIST</B> или <B>%NOLIST</B>.
В тексте программы их можно применять произвольное количество раз, при
этом очередная директива отменяет действие предыдущей.</FONT>

<P><FONT SIZE=+0><B>%CTLS и %NOCTLS</B></FONT>
<BR><FONT SIZE=+0>Если предыдущие директивы влияют на полноту представления
исходного кода в целом, то директивы <B>%CTLS</B> и <B>%NOCTLS</B> управляют
выводом в файл листинга самих директив управления листингом.</FONT>

<P><FONT SIZE=+0><B>%SYMS и %NOSYMS</B> Эти директивы определяют, включать
<B>(%SYMS)</B> или не включать <B>(%NOSYMS)</B> в файл листинга таблицу
идентификаторов.&nbsp;</FONT><A NAME="ДирективыВыводаВключаемыхФайлов"></A>
<H3>
<FONT SIZE=+0>Директивы вывода текста включаемых файлов</FONT></H3>
<FONT SIZE=+0><B>%INCL и %NOINCL</B></FONT>
<BR><FONT SIZE=+0>Эти директивы позволяют регулировать включение в файл
листинга текста включаемых файлов (по директиве <B>INCLUDE</B>). По умолчанию
включаемые файлы записываются в файл листинга. Директива <B>%NOINCL</B>
запрещает вывод в файл листинга всех последующих включаемых файлов, пока
вывод снова не будет разрешен директивой <B>%INCL</B>.&nbsp;</FONT>
<A NAME="ДирективыВыводаУсловногоАссемблирования"></A>
<H3>
<FONT SIZE=+0>Директивы вывода блоков условного ассемблирования</FONT></H3>
<FONT SIZE=+0><B>%CONDS и %NOCONDS (.LFCOND и .SFCONDS)</B></FONT>
<BR><FONT SIZE=+0>Для исследования исходного текста программы, содержащего
директивы условной компиляции, удобно использовать директивы, регулирующие
включение блоков условной компиляции в листинг программы.</FONT>
<BR><FONT SIZE=+0>Директива <B>%CONDS (.LFCOND)</B> заставляет TASM выводить
в файл листинга все операторы условных блоков. При этом в файл листинга
выводятся все блоки, в том числе с условием <I>false</I>. Директива <B>%NOCONDS
(.SFCONDS)</B> запрещает вывод в файл листинга блоков условного ассемблирования
с условием <I>false</I>.</FONT>
<BR><FONT SIZE=+0>Директива <B>.TFCOND</B> переключает режимы вывода <B>%CONDS
(.LFCOND)</B> и <B>%NOCONDS (.SFCONDS)</B>. Эту директиву можно использовать
как отдельно, так и совместно с директивами <B>.LFCOND</B> и <B>.SFCONDS</B>.</FONT>
<BR><FONT SIZE=+0>Первая директива <B>.TFCOND</B>, которую обнаруживает
TASM, разрешает вывод в листинг всех блоков условного ассемблирования.</FONT>
<BR><FONT SIZE=+0>Следующая директива <B>.TFCOND</B> будет запрещать вывод
этих блоков. С директивой <B>.TFCOND</B> можно использовать параметр командной
строки транслятора TASM ???????????????????????????????????? /X: согласно
ему блоки условного ассемблирования будут сначала выводиться в листинг,
но первая же директива <B>.TFCOND</B> запретит их вывод.</FONT>
<A NAME="ДирективыВыводаМакрокоманд"></A>
<H3>
<FONT SIZE=+0>Директивы вывода макрорасширений</FONT></H3>
<B><FONT SIZE=+0>%MACS (.LALL) и %NOMACS (.SALL)</FONT></B>
<BR><FONT SIZE=+0>Аналогично директивам вывода блоков условной компиляции
при отладке программы удобно регулировать полноту информации о применяемых
макрокомандах. По умолчанию транслятор включает макрорасширения в файл
листинга. Можно запретить вывод макрорасширений в файл листинга, что удобно
на некоторых стадиях отладки. Директива <B>%MACS (.LALL)</B> разрешает
вывод в листинг всех макрорасширений. Директивы <B>%NOMACS (.SALL)</B>
запрещает вывод всех операторов макрорасширения в файл листинга. В режиме
MASM можно использовать директиву <B>.XALL</B>, позволяющую выводить в
листинг только те макрорасширения, которые генерируют код или данные.</FONT>
<A NAME="ДирективыВыводаИнформацииОПерекрестныхСсылках"></A>
<H3>
<FONT SIZE=+0>Директивы вывода листинга перекрестных ссылок</FONT></H3>
<FONT SIZE=+0>Приведенные выше директивы <B>%SYMS</B> и <B>%NOSYMS</B>
регулировали вывод в листинг таблицы идентификаторов, в которой приводится
информация о метках, группах и сегментах, но там не сообщается, где они
определены и где используются. Информация в таблице перекрестных ссылок
исправляет этот недостаток. Она облегчает поиск меток и полезна для отладки
программы. В приложении 1 приведена опция командной строки TASM /c для
получения таблицы перекрестных ссылок. Но действие этой опции распространяется
на весь исходный файл, что может быть не совсем удобным. Поэтому TASM дополнительно
предоставляет директивы для создания таблиц перекрестных ссылок только
для отдельных частей исходного кода. Директивы <B>%CREF (.CREF)</B> и <B>%NOCREF
(.XCREF)</B> соответственно разрешают и запрещают сбор информации о перекрестных
ссылках, начиная с точки, где они были определены. При этом директивы <B>%NOCREF
(.XCREF)</B> позволяют выборочно запрещать сбор информации о перекрестных
ссылках для определенных идентификаторов в программе. Эти директивы имеют
следующий синтаксис:</FONT><FONT SIZE=+0></FONT>
<CENTER><FONT SIZE=+0>%NOCREF (.XCREF) [идентификатор, ...]</FONT></CENTER>
<FONT SIZE=+0></FONT>

<P><FONT SIZE=+0>Если в директиве <B>%NOCREF (.XCREF)</B> не указать идентификатор,
то вывод перекрестных ссылок запрещается полностью, если указать некоторые
идентификаторы, то информация не будет собираться только для этих идентификаторов.</FONT>
<A NAME="ДирективыИзмененияФорматаЛистинга"></A>
<H3>
<FONT SIZE=+0>Директивы изменения формата листинга</FONT></H3>
<FONT SIZE=+0>Директивы этой группы позволяют управлять форматом файла
листинга.</FONT><FONT SIZE=+0></FONT>

<P><B><FONT SIZE=+0>.PAGE</FONT></B>
<BR><FONT SIZE=+0>Директива <B>.PAGE</B> задает высоту и ширину страницы
файла листинга и начинает его новую страницу. Она имеет следующий синтаксис:</FONT><FONT SIZE=+0></FONT>
<CENTER><FONT SIZE=+0>PAGE [число_строк][,число_столбцов] PAGE +</FONT></CENTER>
<FONT SIZE=+0></FONT>

<P><FONT SIZE=+0>Здесь:</FONT>
<UL>
<LI>
<FONT SIZE=+0>число_строк задает число строк, выводимых на странице листинга;</FONT></LI>

<LI>
<FONT SIZE=+0>число столбцов находится в диапазоне 59...255 и задает число
столбцов на странице.</FONT></LI>
</UL>
<FONT SIZE=+0>Если опустить один из этих параметров, то текущая установка
данного параметра останется без изменений. Для изменения только числа столбцов
необходимо указать перед этим параметром запятую. С помощью директивы .<B>PAGE</B>
можно разбивать листинг на разделы, в пределах которых нумерация начинается
с нуля. Так, при указании после директивы <B>.PAGE</B> символа “+” начинается
новая страница, номер раздела увеличивается, а номер страницы снова устанавливается
в 1. Если использовать директиву <B>.PAGE</B> без аргументов, то листинг
возобновляется с новой страницы без изменения номера раздела.</FONT><FONT SIZE=+0></FONT>

<P><B><FONT SIZE=+0>%PAGESIZE (.PAGESIZE)</FONT></B>
<BR><FONT SIZE=+0>Директива <B>%PAGESIZE</B> работает так же, как и директива
<B>.PAGE</B>, но, в отличие от последней, она не начинает новую страницу,
а лишь определяет ее параметры:</FONT><FONT SIZE=+0></FONT>
<CENTER><FONT SIZE=+0>%PAGESIZE [число_строк][,число_столбцов]</FONT></CENTER>
<FONT SIZE=+0></FONT>

<P><B><FONT SIZE=+0>%NEWPAGE</FONT></B>
<BR><FONT SIZE=+0>Директива <B>%NEWPAGE</B> работает аналогично директиве
<B>.PAGE</B> без аргументов. Строки исходного текста после директивы <B>%NEWPAGE</B>
будут начинаться с новой страницы.</FONT><FONT SIZE=+0></FONT>

<P><B><FONT SIZE=+0>%BIN</FONT></B>
<BR><FONT SIZE=+0>Директива <B>%BIN</B> устанавливает длину поля объектного
кода в файле листинга. Ее синтаксис:</FONT><FONT SIZE=+0></FONT>
<CENTER><FONT SIZE=+0>%BIN размер</FONT></CENTER>
<FONT SIZE=+0></FONT>

<P><FONT SIZE=+0>Здесь размер — некоторая константа.</FONT>
<BR><FONT SIZE=+0>По умолчанию поле объектного кода занимает в файле листинга
до 20 позиций.</FONT><FONT SIZE=+0></FONT>

<P><FONT SIZE=+0><B>%DEPTH</B></FONT>
<BR><FONT SIZE=+0>Директива %DEPTH устанавливает размер поля глубины в
файле листинга. Ее синтаксис:</FONT><FONT SIZE=+0></FONT>
<CENTER><FONT SIZE=+0>%DEPTH размер</FONT></CENTER>
<FONT SIZE=+0></FONT>

<P><FONT SIZE=+0>Здесь размер задает количество столбцов в поле глубины
листинга.</FONT>
<BR><FONT SIZE=+0>Напомню, что данное поле показывает уровень вложенности
включаемых файлов (INCLUDE) и макрорасширений. Если указать в качестве
размера значение 0, то поле уровня вложенности не выводится. По умолчанию
это поле имеет значение 1.</FONT><FONT SIZE=+0></FONT>

<P><FONT SIZE=+0><B>%LINENUM</B></FONT>
<BR><FONT SIZE=+0>Директива <B>%LINENUM</B> позволяет задать размер поля
занимаемого номерами строк в файле листинга:</FONT><FONT SIZE=+0></FONT>
<CENTER><FONT SIZE=+0>%LINENUM размер</FONT></CENTER>
<FONT SIZE=+0></FONT>

<P><FONT SIZE=+0>По умолчанию под номер строки отводятся четыре столбца.</FONT><FONT SIZE=+0></FONT>

<P><FONT SIZE=+0><B>%TRUNC и %NOTRUNC</B></FONT>
<BR><FONT SIZE=+0>Директивы <B>%TRUNC</B> и <B>%NOTRUNC</B> предназначены
для усечения длинных полей листинга. Их синтаксис:</FONT><FONT SIZE=+0></FONT>
<CENTER><FONT SIZE=+0>%TRUNC и %NOTRUNC</FONT></CENTER>
<FONT SIZE=+0></FONT>

<P><FONT SIZE=+0>Если некоторая строка исходного кода получается слишком
длинной, то она автоматически усекается. Если возникает необходимость увидеть
всю генерируемую строку, то можно использовать директиву <B>%NOTRUNC</B>,
действие которой будет заключаться в том, что слишком длинная строка будет
переноситься на следующую строку. Для включения режима усечения нужно использовать
директиву <B>%TRUNC</B>. Такие переключения можно осуществлять неограниченное
количество раз.</FONT><FONT SIZE=+0></FONT>

<P><FONT SIZE=+0><B>%PCNT</B></FONT>
<BR><FONT SIZE=+0>Директива <B>%PCNT</B> задает размер поля “сегмент:смещение”
в файле листинга. Ее синтаксис:</FONT><FONT SIZE=+0></FONT>
<CENTER><FONT SIZE=+0>%PCNT размер</FONT></CENTER>
<FONT SIZE=+0></FONT>

<P><FONT SIZE=+0>Здесь размер — число столбцов, которое необходимо отвести
для смещения в текущем ассемблируемом сегменте.</FONT>
<BR><FONT SIZE=+0>По умолчанию TASM устанавливает размер, равный 4 для
обычных 16-битных сегментов (атрибут размера адреса use16) и 8 для 32-битных
сегментов (атрибут размера адреса use32). Директива <B>%PCNT</B> позволяет
переопределить эти используемые по умолчанию значения.</FONT><FONT SIZE=+0></FONT>

<P><FONT SIZE=+0><B>%TITLE</B></FONT>
<BR><FONT SIZE=+0>Директива <B>%TITLE</B> задает заголовок файла листинга.
Ее синтаксис:</FONT><FONT SIZE=+0></FONT>
<CENTER><FONT SIZE=+0>%TITLE “текст”</FONT></CENTER>
<FONT SIZE=+0></FONT>

<P><FONT SIZE=+0>Здесь текст — строка, которая будет выводиться в верхней
части каждой страницы после имени исходного файла и перед заголовком, заданным
по директиве <B>%SUBTTL</B>.</FONT>
<BR><FONT SIZE=+0>В отличие от других директив, <B>%TITLE</B> можно использовать
в программе только один раз.</FONT><FONT SIZE=+0></FONT>

<P><FONT SIZE=+0><B>%SUBTTL</B></FONT>
<BR><FONT SIZE=+0>Директива <B>%SUBTTL</B> задает подзаголовок файла листинга.
Ее синтаксис:</FONT><FONT SIZE=+0></FONT>
<CENTER><FONT SIZE=+0>%SUBTTL “текст”</FONT></CENTER>
<FONT SIZE=+0></FONT>

<P><FONT SIZE=+0>Подзаголовок представляет собой текст, который выводится
в верхней части каждой страницы после имени исходного файла и после заголовка,
заданного директивой <B>%TITLE</B>. Директиву <B>%SUBTTL</B> можно указывать
в программе столько раз, сколько необходимо. Каждая директива изменяет
подзаголовок, который будет выводиться на следующей странице листинга.</FONT><FONT SIZE=+0></FONT>

<P><FONT SIZE=+0><B>%TABSIZE</B></FONT>
<BR><FONT SIZE=+0>Директива <B>%TABSIZE</B> задает позицию табуляции в
файле листинга. Ее синтаксис:</FONT><FONT SIZE=+0></FONT>
<CENTER><FONT SIZE=+0>%TABSIZE размер</FONT></CENTER>
<FONT SIZE=+0></FONT>

<P><FONT SIZE=+0>Здесь размер — число столбцов между двумя позициями табуляции
в файле листинга (по умолчанию 8 столбцов).</FONT><FONT SIZE=+0></FONT>

<P><B><FONT SIZE=+0>%TEXT</FONT></B>
<BR><FONT SIZE=+0>Директива <B>%TEXT</B> используется для задания длины
поля исходного текста в файле листинга. Ее синтаксис:</FONT><FONT SIZE=+0></FONT>
<CENTER><FONT SIZE=+0>%TEXT размер</FONT></CENTER>
<FONT SIZE=+0></FONT>

<P><FONT SIZE=+0>Здесь размер — число столбцов, используемых для вывода
исходных строк. Если размер строки превышает длину этого поля, то строка
будет либо усекаться, либо переноситься на следующую строку, в зависимости
от директив <B>%TRUNC</B> или <B>%NOTRUNC</B>.&nbsp;</FONT>
<HR SIZE=5 WIDTH=80%>
</BODY>
<!конец html-документа>
</HTML>
